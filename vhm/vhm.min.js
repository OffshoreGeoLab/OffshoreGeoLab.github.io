function setvalue(t){for(const a in t)$("input#"+a).val(t[a])}function resetVhmForm(){var t={D:10,d:4,K:2,sum:5,Vd:4e3,Hd:0,Md:0,Vl:0,Hl:2e3,Ml:7e3,lam_d:1,lam_l:1,lam_mt:1,plotType:"normalised",optimisation:"Dopt"},a=("V".concat(String.prototype.sub("d")),{dD:"",A:"",su0:"",su0f:"",k:"",Vf:"",Hf:"",Mf:""}),e={NcV:"",NcH:"",NcM:"",Vult:"",Hult:"",Mult:"",v:"",h:"",m:"",hh_star:"",mm_star:"",D_optimized:"",d_optimized:"",sum_optimized:"",k_optimized:"",lam_mt_optimized:"",f2_optimized:""};for(const a in t)$("input#"+a).val(t[a]);for(const t in a)$("input#"+t).val(a[t]);for(const t in e)$("input#"+t).val(e[t]);$("input:radio[id=hhmm_opt]").attr("checked",!0),$("input:radio[id=D-optimise]").attr("checked",!0),$(".optimized").hide(),$("#D-display").show()}function resetVhm(){resetVhmForm(),resetPlots()}function calculateVhm(){let t=$("div.card-input input[type=number]"),a=[];t.each((t,e)=>{a[$(e).attr("id")]=Number($(e).val())}),t=$("div.card-input input[type=radio]:checked"),t.each((t,e)=>{a[$(e).val()]="on"});var e,m="vhm-plot",l=$("#"+m)[0].clientWidth,d="normalised"in a?"true":"false",o={D:a.D,d:a.d,sum:a.sum,K:a.K,Vd:a.Vd,Hd:a.Hd,Md:a.Md,Vl:a.Vl,Hl:a.Hl,Ml:a.Ml,lam_d:a.lam_d,lam_l:a.lam_l,lam_mt:a.lam_mt,optional:a.optional,optimise:0,normalised:d},i={errors:[]};if(inputCheck(i,"d/D",a.d/a.D,0,.5),inputCheck(i,"k_su",a.K,0,50),inputCheck(i,"ϰ_su",a.K*a.D/a.sum,0,100),!alertInputErrors(i)){try{e=calculate_vhm(o,m,l),derivedInputs={dD:e.dD.toFixed(2),A:e.A.toFixed(2),su0:e.su0.toFixed(0),su0f:Number(e.su0*a.lam_mt).toFixed(2),k:e.k.toFixed(2),Vf:e.Vf.toFixed(0),Hf:e.Hf.toFixed(0),Mf:e.Mf.toFixed(0)},outputs={NcV:e.NcV.toFixed(2),NcH:e.NcH.toFixed(2),NcM:e.NcM.toFixed(2),Vult:e.Vult.toFixed(2),Hult:e.Hult.toFixed(2),Mult:e.Mult.toFixed(2),v:e.v.toFixed(2),h:e.h.toFixed(2),m:e.m.toFixed(2),hh_star:e.hh_star.toFixed(2),mm_star:e.mm_star.toFixed(2),D_optimized:"N/A",d_optimized:"N/A",sum_optimized:"N/A",k_optimized:"N/A",lam_mt_optimized:"N/A",f2_optimized:"N/A"},setvalue(derivedInputs),setvalue(outputs)}catch(t){alert("Error: "+t)}return e}}function optimiseVhm(){let t=$("div.card-input input[type=number]"),a=[];t.each((t,e)=>{a[$(e).attr("id")]=Number($(e).val())}),t=$("div.card-input input[type=radio]:checked"),t.each((t,e)=>{a[$(e).val()]="on"});var e="vhm-plot",m=$("#"+e)[0].clientWidth,l="normalised"in a?"true":"false",d=$('input[name="optimise"]:checked').attr("value");if(d=Number(d),console.log(d),a.d/a.D>.5||a.d/a.D<0)alert("d/D must be between 0 and 0.5.");else if(a.K<0||a.K>50)alert("k_su must be between 0 and 50.");else if(a.k<0||a.k>100)alert("ϰ_su must be between 0 and 100.");else{var o,i={D:a.D,d:a.d,sum:a.sum,K:a.K,Vd:a.Vd,Hd:a.Hd,Md:a.Md,Vl:a.Vl,Hl:a.Hl,Ml:a.Ml,lam_d:a.lam_d,lam_l:a.lam_l,lam_mt:a.lam_mt,optimise:d,normalised:l};try{if(o=calculate_vhm(i,e,m),"error"in o)return void alert(o.error);var s={dD:o.dD.toFixed(2),A:o.A.toFixed(2),su0:o.su0.toFixed(2),su0f:Number(o.su0*a.lam_mt).toFixed(2),k:o.k.toFixed(2),Vf:o.Vf.toFixed(0),Hf:o.Hf.toFixed(0),Mf:o.Mf.toFixed(0)},r={NcV:o.NcV.toFixed(2),NcH:o.NcH.toFixed(2),NcM:o.NcM.toFixed(2),Vult:o.Vult.toFixed(2),Hult:o.Hult.toFixed(2),Mult:o.Mult.toFixed(2),v:o.v.toFixed(2),h:o.h.toFixed(2),m:o.m.toFixed(2),hh_star:o.hh_star.toFixed(2),mm_star:o.mm_star.toFixed(2),D_optimized:o.D_optimized.toFixed(2),d_optimized:o.d_optimized.toFixed(2),sum_optimized:o.sum_optimized.toFixed(2),k_optimized:o.k_optimized.toFixed(2),lam_mt_optimized:o.lam_mt_optimized.toFixed(2),f2_optimized:o.f2_optimized.toFixed(2)};setvalue(s),setvalue(r)}catch(t){alert("There was a calculation error, try again with different input terms."),console.log(t)}}}function plotZoom(t){document.fullscreen?document.exitFullscreen():(fullPlotlyId=$(t).closest(".js-plotly-plot")[0].id,$(t).closest(".js-plotly-plot")[0].requestFullscreen())}function fullscreenTool(){$(".modebar-btn.plotlyjsicon.modebar-btn--logo").replaceWith('\n  <a rel="tooltip" onclick=plotZoom(this) class="modebar-btn fullscreen-btn" data-title="Full Screen" data-attr="zoom" data-val="auto" data-toggle="false" data-gravity="n" >\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon" height="1em" width="1em">\n      <!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->\n      <path d="M128 32H32C14.31 32 0 46.31 0 64v96c0 17.69 14.31 32 32 32s32-14.31 32-32V96h64c17.69 0 32-14.31 32-32S145.7 32 128 32zM416 32h-96c-17.69 0-32 14.31-32 32s14.31 32 32 32h64v64c0 17.69 14.31 32 32 32s32-14.31 32-32V64C448 46.31 433.7 32 416 32zM128 416H64v-64c0-17.69-14.31-32-32-32s-32 14.31-32 32v96c0 17.69 14.31 32 32 32h96c17.69 0 32-14.31 32-32S145.7 416 128 416zM416 320c-17.69 0-32 14.31-32 32v64h-64c-17.69 0-32 14.31-32 32s14.31 32 32 32h96c17.69 0 32-14.31 32-32v-96C448 334.3 433.7 320 416 320z"/>\n    </svg>\n  </a>\n  ')}var fullPlotlyId="vhm-plot";$("input[name=optimise]").click(function(){let t=$(this).attr("id").replace("optimise","display");$(".optimized").hide(),$("#"+t).show()});var calculate_vhm,blankLayout={title:"<b>Failure envelope & factored load in terms of normalised (h/h*, m/m*)</b>",xaxis:{title:"h/h*"},yaxis:{title:"m/m*"},titlefont:{family:"Roboto, sans-serif",color:"#01579b",size:19}},resetPlots=function(t){Plotly.newPlot(fullPlotlyId,[],blankLayout),fullscreenTool()},pi=3.14159,inf=9007199254740991,xvals=[-2,2],yvals=[0,2],vhm_data=(blankLayout={title:"<b>Failure envelope & factored load in terms of normalised (h/h*, m/m*)</b>",xaxis:{title:"h/h*"},yaxis:{title:"m/m*"},titlefont:{family:"Roboto, sans-serif",color:"#01579b",size:19}},function(){"use strict";var t=[[0,0,1.6285,-.0463,6.05,1,.67],[0,6,1.9992,.0571,9.85,1,1.19],[0,20,2.463,-.0105,15.48,1,1.92],[0,60,2.8896,.1342,27.69,1,3.49],[0,100,3.1223,.1339,37.88,1,4.77],[.1,0,1.9301,-.1583,7.28,1.72,.81],[.1,6,1.8459,-.1007,10.11,1.58,1.17],[.1,20,2.0858,-.0206,11.46,1.42,1.35],[.1,60,2.1243,.0178,12.3,1.32,1.49],[.1,100,2.0532,.0049,12.25,1.3,1.5],[.25,0,2.1611,-.4417,8.75,2.82,1.01],[.25,6,1.9442,-.269,10.48,2.36,1.19],[.25,20,1.8992,-.2142,10.81,2.07,1.22],[.25,60,1.9879,-.2404,10.97,1.91,1.26],[.25,100,2.001,-.2174,10.78,1.89,1.25],[.5,0,1.609,-.5989,11.29,4.15,1.47],[.5,6,1.7584,-.55,11.29,3.31,1.34],[.5,20,1.9931,-.4797,11.31,2.94,1.26],[.5,60,2.0222,-.4564,12.07,2.78,1.28],[.5,100,1.6482,-.4841,11.31,2.76,1.27]];return{data:t,ins:t.map(function(t){return t.slice(0,2)}),alphas:t.map(function(t){return t.slice(2,3)}),betas:t.map(function(t){return t.slice(3,4)}),NcVs:t.map(function(t){return t.slice(4,5)}),NcHs:t.map(function(t){return t.slice(5,6)}),NcMs:t.map(function(t){return t.slice(6,7)})}}()),inputCheck=function(t,a,e,m=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY,d=2){">=0"==m&&(isNaN(e)||e<0)?t.errors.push(a+" must be ≥ 0."):">0"==m&&(isNaN(e)||e<=0)?t.errors.push(a+" must be > 0."):m==Number.NEGATIVE_INFINITY&&l==Number.POSITIVE_INFINITY&&isNaN(e)?t.errors.push(a+" must be a number."):(isNaN(e)||e<m||e>l)&&t.errors.push(a+" must be between "+Number(m).toFixed(d)+" and "+Number(l).toFixed(d)+".")},alertInputErrors=function(t){if(t.errors.length>0){for(var a="",e=0;e<t.errors.length;e++)a+=t.errors[e]+"\n";return alert(a),!0}return!1};calculate_vhm=function(t,a,e){"use strict";try{var m=t.D,l=t.d,d=t.sum,o=t.K,i=t.Vd,s=t.Hd,r=t.Md,h=t.Vl,u=t.Hl,n=t.Ml,f=t.lam_d,_=t.lam_l,p=t.lam_mt,c=t.normalised,v=t.optimise,b=t.optional;if(b&&"t_cap"in t&&"t_skirt"in t&&"shell_density"in t)var M=t.t_cap,N=t.t_skirt,H=t.shell_density}catch(t){alert("Developer, you are not passing variables correctly: "+t)}var y=4.69,V=2.12,w=function(t,a,e){for(var m=[],l=(a-t)/e,d=0;d<=l;d++)m.push(d*e+t);return m},z=function(t,a){for(var e=[],m=[],l=0;l<a.length;l++)e.push(t);var d=[];for(l=0;l<a.length;l++){for(var o=0;o<t.length;o++)d.push(a[l]);m.push(d),d=[]}return{x:e,y:m}},x=function(t,a,e,l,d){var o=[e,l],i=vhm_data.ins,s=vhm_data.alphas,r=vhm_data.betas,h=vhm_data.NcVs,u=vhm_data.NcHs,n=vhm_data.NcMs,f=Terp.intern(i,s,o),_=Terp.intern(i,r,o),p=Terp.intern(i,h,o),c=Terp.intern(i,u,o),v=Terp.intern(i,n,o),b=p*d*a,M=c*d*a,N=v*d*a*m,H=D/b,w=P/M,z=g/N,x=1-Math.pow(H,y),k=1-Math.pow(H,V),F=w/x,A=z/k;return{alpha:f,beta:_,NcV:p,NcH:c,NcM:v,v:H,h:w,m:z,Vult:b,Hult:M,Mult:N,h_star:x,m_star:k,hh_star:F,mm_star:A,f1:Y}},k=function(a,e,m,l,d,o,i){if("true"===o)var s="h/h*",r="m/m*",h="<b>Failure envelope & factored load in terms of normalised (h/h*, m/m*)</b>";else s="H<sub>f</sub> (kN)",r="M<sub>f</sub> (kNm)",h="<b>Failure envelope & factored load in terms of factored (H<sub>f</sub>, M<sub>f</sub>)</b>";return t.f2&&(h="D: "+a+"m, d: "+e+"m, Sum: "+m+"kPa, K: "+l+"kPa/m, "+String.fromCharCode(955)+"mt: "+d+", function: "+t.f2),{width:i,title:h,xaxis:{title:s,exponentformat:"none"},yaxis:{title:r,exponentformat:"none"},titlefont:{family:"Roboto, sans-serif",color:"#01579b",size:19}}},F=function(t){var a={x:"true"==t.normalised?w(-2,2,.05):math.multiply(math.dotMultiply(w(-2,2,.05),1-Math.pow(t.v,y)),t.Hult),y:"true"==t.normalised?w(0,2,.05):math.multiply(math.dotMultiply(w(0,2,.05),1-Math.pow(t.v,V)),t.Mult),z:t.f1,name:"Failure Envelope",type:"contour",colorscale:[["0.0","rgb(224, 224, 224)"],["1.0","rgb(255, 255, 255)"]],autocontour:!1,showscale:!1,contours:{start:1,end:1,size:1}},e={x:"true"==t.normalised?[t.hh_star]:[t.Hf],y:"true"==t.normalised?[t.mm_star]:[t.Mf],name:"Factored Load",type:"scatter",marker:{symbol:"diamond",size:12,color:"#01579b"}};return[a,e]};p>=1?(d/=p,o/=p):(d*=p,o*=p);var D=f*i+_*h,P=f*s+_*u,g=f*r+_*n,A=pi*(Math.pow(m,2)/4),$=l/m,I=d+o*l,K=o*m/d,T=b?pi*Math.pow(m,2)/4*M+pi*m*l*N:"undefined",C=b?T*H:"undefined",E=z(w(-2,2,.05),w(0,2,.05)),S=E.x,L=E.y;if(0===v){Q=x(l,I,$,K,A);var Y=math.re(math.add(math.add(math.dotPow(math.abs(S),Q.alpha),math.dotPow(L,Q.alpha)),math.dotMultiply(math.multiply(2*Q.beta,S),L))),j=k(m,l,d,o,p,c,e),R=F({f1:Y,normalised:c,v:Q.v,Hult:Q.Hult,Mult:Q.Mult,Hf:P,Mf:g,hh_star:Q.hh_star,mm_star:Q.mm_star});return Plotly.newPlot(a,R,j),fullscreenTool(),{dD:$,A:A,su0:I,k:K,Vf:D,Hf:P,Mf:g,NcV:Q.NcV,NcH:Q.NcH,NcM:Q.NcM,Vult:Q.Vult,Hult:Q.Hult,Mult:Q.Mult,v:Q.v,h:Q.h,m:Q.m,hh_star:Q.hh_star,mm_star:Q.mm_star,shell_volume:T,shell_weight:C}}if(1===v){$=.5;var W=.5,G=0,O=inf,Z=0;for($=.5;$>=0;$-=.01){l=m*$,I=d+o*l,Q=x(l,I,$,K,A);var q=math.re(math.add(math.add(math.dotPow(math.abs(Q.hh_star),Q.alpha),math.dotPow(Q.mm_star,Q.alpha)),math.dotMultiply(math.multiply(2*Q.beta,Q.hh_star),Q.mm_star)));if(b){T=pi*Math.pow(m,2)/4*t.t_cap+pi*m*l*t.t_skirt,C=T*t.shell_density;for(var B=-.05;B>=-.5;B-=.05)if(math.subtract(q,1)>B&&math.subtract(q,1)<0&&l>=0&&m>=0&&o>=0&&d>=0&&Q.mm_star>=0&&C<=O){Z=math.add(q,0),G++,O=C;break}}else if(math.abs(math.subtract(q,1))<W&&math.subtract(q,1)<0&&d>0&&l>0&&m>0&&Q.mm_star>0){Z=math.add(q,0),G++,W=math.abs(math.subtract(q,1));var J={D:m,sum:d,lam_mt:p,d:l,K:o,dD:$,A:A,su0:I,k:K,Vf:D,Mf:g,Hf:P,data:Q,shell_volume:"undefined",shell_weight:"undefined"}}}if(0!=G){Y=math.re(math.add(math.add(math.dotPow(math.abs(S),J.data.alpha),math.dotPow(L,J.data.alpha)),math.dotMultiply(math.multiply(2*J.data.beta,S),L))),j=k(J.D,J.d,J.sum,J.K,J.lam_mt,c),R=F({f1:Y,normalised:c,v:J.data.v,Hult:J.data.Hult,Mult:J.data.Mult,Hf:J.Hf,Mf:J.Mf,hh_star:J.data.hh_star,mm_star:J.data.mm_star});return Plotly.newPlot(a,R,j),fullscreenTool(),{dD:J.dD,A:J.A,su0:J.su0,k:J.k,Vf:J.Vf,Hf:J.Hf,Mf:J.Mf,NcV:J.data.NcV,NcH:J.data.NcH,NcM:J.data.NcM,Vult:J.data.Vult,Hult:J.data.Hult,Mult:J.data.Mult,v:J.data.v,h:J.data.h,m:J.data.m,hh_star:J.data.hh_star,mm_star:J.data.mm_star,shell_volume:J.shell_volume,shell_weight:J.shell_weight,D_optimized:J.D,d_optimized:J.d,sum_optimized:J.sum,k_optimized:J.K,lam_mt_optimized:J.lam_mt,f2_optimized:Z}}return{error:"No solution found for these parameters."}}if(2===v){$=.5;W=.5,G=0,O=inf,Z=0;for($=.5;$>.01;$-=.01){m=l/$,K=o*m/d,A=pi*(Math.pow(m,2)/4),Q=x(l,I,$,K,A);q=math.re(math.add(math.add(math.dotPow(math.abs(Q.hh_star),Q.alpha),math.dotPow(Q.mm_star,Q.alpha)),math.dotMultiply(math.multiply(2*Q.beta,Q.hh_star),Q.mm_star)));if(b){T=pi*Math.pow(m,2)/4*t.t_cap+pi*m*l*t.t_skirt,C=T*t.shell_density;for(B=-.05;B>=-.5;B-=.05)if(math.subtract(q,1)>B&&math.subtract(q,1)<0&&l>=0&&m>=0&&o>=0&&d>=0&&Q.mm_star>=0&&C<=O){Z=math.add(q,0),G++,O=C;break}}else if(math.abs(math.subtract(q,1))<W&&math.subtract(q,1)<0&&d>0&&l>0&&m>0&&Q.mm_star>0){Z=math.add(q,0),G++,W=math.abs(math.subtract(q,1));J={D:m,sum:d,lam_mt:p,d:l,K:o,dD:$,A:A,su0:I,k:K,Vf:D,Mf:g,Hf:P,data:Q,shell_volume:"undefined",shell_weight:"undefined"}}}if(0!=G){Y=math.re(math.add(math.add(math.dotPow(math.abs(S),J.data.alpha),math.dotPow(L,J.data.alpha)),math.dotMultiply(math.multiply(2*J.data.beta,S),L))),j=k(J.D,J.d,J.sum,J.K,J.lam_mt,c),R=F({f1:Y,normalised:c,v:J.data.v,Hult:J.data.Hult,Mult:J.data.Mult,Hf:J.Hf,Mf:J.Mf,hh_star:J.data.hh_star,mm_star:J.data.mm_star});return Plotly.newPlot(a,R,j),fullscreenTool(),{dD:J.dD,A:J.A,su0:J.su0,k:J.k,Vf:J.Vf,Hf:J.Hf,Mf:J.Mf,NcV:J.data.NcV,NcH:J.data.NcH,NcM:J.data.NcM,Vult:J.data.Vult,Hult:J.data.Hult,Mult:J.data.Mult,v:J.data.v,h:J.data.h,m:J.data.m,hh_star:J.data.hh_star,mm_star:J.data.mm_star,shell_volume:J.shell_volume,shell_weight:J.shell_weight,D_optimized:J.D,d_optimized:J.d,sum_optimized:J.sum,k_optimized:J.K,lam_mt_optimized:J.lam_mt,f2_optimized:Z}}return{error:"No solution found for these parameters."}}if(3===v){W=.5,G=0,O=inf,Z=0;for(K=100;K>=0;K--){o=K*d/m,I=d+o*l,Q=x(l,I,$,K,A);q=math.re(math.add(math.add(math.dotPow(math.abs(Q.hh_star),Q.alpha),math.dotPow(Q.mm_star,Q.alpha)),math.dotMultiply(math.multiply(2*Q.beta,Q.hh_star),Q.mm_star)));if(b){T=pi*Math.pow(m,2)/4*t.t_cap+pi*m*l*t.t_skirt,C=T*t.shell_density;for(B=-.05;B>=-.5;B-=.05)if(math.subtract(q,1)>B&&math.subtract(q,1)<0&&l>=0&&m>=0&&o>=0&&d>=0&&Q.mm_star>=0&&C<=O){Z=math.add(q,0),G++,O=C;break}}else if(math.abs(math.subtract(q,1))<W&&math.subtract(q,1)<0&&d>0&&l>0&&m>0&&Q.mm_star>0){Z=math.add(q,0),G++,W=math.abs(math.subtract(q,1));J={D:m,sum:d,lam_mt:p,d:l,K:o,dD:$,A:A,su0:I,k:K,Vf:D,Mf:g,Hf:P,data:Q,shell_volume:"undefined",shell_weight:"undefined"}}}if(0!=G){Y=math.re(math.add(math.add(math.dotPow(math.abs(S),J.data.alpha),math.dotPow(L,J.data.alpha)),math.dotMultiply(math.multiply(2*J.data.beta,S),L))),j=k(J.D,J.d,J.sum,J.K,J.lam_mt,c),R=F({f1:Y,normalised:c,v:J.data.v,Hult:J.data.Hult,Mult:J.data.Mult,Hf:J.Hf,Mf:J.Mf,hh_star:J.data.hh_star,mm_star:J.data.mm_star});return Plotly.newPlot(a,R,j),fullscreenTool(),{dD:J.dD,A:J.A,su0:J.su0,k:J.k,Vf:J.Vf,Hf:J.Hf,Mf:J.Mf,NcV:J.data.NcV,NcH:J.data.NcH,NcM:J.data.NcM,Vult:J.data.Vult,Hult:J.data.Hult,Mult:J.data.Mult,v:J.data.v,h:J.data.h,m:J.data.m,hh_star:J.data.hh_star,mm_star:J.data.mm_star,shell_volume:J.shell_volume,shell_weight:J.shell_weight,D_optimized:J.D,d_optimized:J.d,sum_optimized:J.sum,k_optimized:J.K,lam_mt_optimized:J.lam_mt,f2_optimized:Z}}return{error:"No solution found for these parameters."}}if(4===v){W=.5,G=0,O=inf,Z=0;for(d=.01;d<20;d+=.01){o=K*d/m,I=d+o*l,Q=x(l,I,$,K,A);q=math.re(math.add(math.add(math.dotPow(math.abs(Q.hh_star),Q.alpha),math.dotPow(Q.mm_star,Q.alpha)),math.dotMultiply(math.multiply(2*Q.beta,Q.hh_star),Q.mm_star)));if(b){T=pi*Math.pow(m,2)/4*t.t_cap+pi*m*l*t.t_skirt,C=T*t.shell_density;for(B=-.05;B>=-.5;B-=.05)if(math.subtract(q,1)>B&&math.subtract(q,1)<0&&l>=0&&m>=0&&o>=0&&d>=0&&Q.mm_star>=0&&C<=O){Z=math.add(q,0),G++,O=C;break}}else if(math.abs(math.subtract(q,1))<W&&math.subtract(q,1)<0&&d>0&&l>0&&m>0&&Q.mm_star>0){Z=math.add(q,0),G++,W=math.abs(math.subtract(q,1));J={D:m,sum:d,lam_mt:p,d:l,K:o,dD:$,A:A,su0:I,k:K,Vf:D,Mf:g,Hf:P,data:Q,shell_volume:"undefined",shell_weight:"undefined"}}}if(0!=G){Y=math.re(math.add(math.add(math.dotPow(math.abs(S),J.data.alpha),math.dotPow(L,J.data.alpha)),math.dotMultiply(math.multiply(2*J.data.beta,S),L))),j=k(J.D,J.d,J.sum,J.K,J.lam_mt,c),R=F({f1:Y,normalised:c,v:J.data.v,Hult:J.data.Hult,Mult:J.data.Mult,Hf:J.Hf,Mf:J.Mf,hh_star:J.data.hh_star,mm_star:J.data.mm_star});return Plotly.newPlot(a,R,j),fullscreenTool(),{dD:J.dD,A:J.A,su0:J.su0,k:J.k,Vf:J.Vf,Hf:J.Hf,Mf:J.Mf,NcV:J.data.NcV,NcH:J.data.NcH,NcM:J.data.NcM,Vult:J.data.Vult,Hult:J.data.Hult,Mult:J.data.Mult,v:J.data.v,h:J.data.h,m:J.data.m,hh_star:J.data.hh_star,mm_star:J.data.mm_star,shell_volume:J.shell_volume,shell_weight:J.shell_weight,D_optimized:J.D,d_optimized:J.d,sum_optimized:J.sum,k_optimized:J.K,lam_mt_optimized:J.lam_mt,f2_optimized:Z}}return{error:"No solution found for these parameters."}}if(5===v){W=.5,G=0,O=inf;var Q,U=d,X=o;Z=0;for(p=.05;p<5;p+=.05){p>=1?(d=U/p,o=X/p):(d=U*p,o=X*p),K=o*m/d,I=d+o*l,Q=x(l,I,$,K,A);q=math.re(math.add(math.add(math.dotPow(math.abs(Q.hh_star),Q.alpha),math.dotPow(Q.mm_star,Q.alpha)),math.dotMultiply(math.multiply(2*Q.beta,Q.hh_star),Q.mm_star)));if(b){T=pi*Math.pow(m,2)/4*t.t_cap+pi*m*l*t.t_skirt,C=T*t.shell_density;for(B=-.05;B>=-.5;B-=.05)if(math.subtract(q,1)>B&&math.subtract(q,1)<0&&l>=0&&m>=0&&o>=0&&d>=0&&Q.mm_star>=0&&C<=O){Z=math.add(q,0),G++,O=C;break}}else if(math.abs(math.subtract(q,1))<W&&math.subtract(q,1)<0&&d>0&&l>0&&m>0&&Q.mm_star>0){Z=math.add(q,0),G++,W=math.abs(math.subtract(q,1));J={D:m,sum:d,lam_mt:p,d:l,K:o,dD:$,A:A,su0:I,k:K,Vf:D,Mf:g,Hf:P,data:Q,shell_volume:"undefined",shell_weight:"undefined"}}}if(0!=G){Y=math.re(math.add(math.add(math.dotPow(math.abs(S),J.data.alpha),math.dotPow(L,J.data.alpha)),math.dotMultiply(math.multiply(2*J.data.beta,S),L))),j=k(J.D,J.d,J.sum,J.K,J.lam_mt,c),R=F({f1:Y,normalised:c,v:J.data.v,Hult:J.data.Hult,Mult:J.data.Mult,Hf:J.Hf,Mf:J.Mf,hh_star:J.data.hh_star,mm_star:J.data.mm_star});return Plotly.newPlot(a,R,j),fullscreenTool(),{dD:J.dD,A:J.A,su0:J.su0,k:J.k,Vf:J.Vf,Hf:J.Hf,Mf:J.Mf,NcV:J.data.NcV,NcH:J.data.NcH,NcM:J.data.NcM,Vult:J.data.Vult,Hult:J.data.Hult,Mult:J.data.Mult,v:J.data.v,h:J.data.h,m:J.data.m,hh_star:J.data.hh_star,mm_star:J.data.mm_star,shell_volume:J.shell_volume,shell_weight:J.shell_weight,D_optimized:J.D,d_optimized:J.d,sum_optimized:J.sum,k_optimized:J.K,lam_mt_optimized:J.lam_mt,f2_optimized:Z}}return{error:"No solution found for these parameters."}}},$(document).ready(()=>{fullscreenTool()}),$(window).resize(t=>{fullPlotlyId&&Plotly.Plots.resize(fullPlotlyId),fullscreenTool()});