function setvalue(t){for(const e in t)$("input#"+e).val(t[e])}function resetAnchorForm(){var t={Sum:50,k:0,Zt:0,d:.1,bd:2.5,Nc1:7.6,Miu:.4,mass:32,Ap:12,f:1.4,qw:28,Nc2:9,qm:0,offset:6.2,plotType:"normalised",optimisation:"Dopt"},e=("V".concat(String.prototype.sub("d")),{Tp:"",su_at_zf:"",q_p_w:"",Ta1:"",zaQav:"",su_dz:"",Ta2:""}),r={za:"",zf:"",Tm:"",h:""};setvalue(t),setvalue(e),setvalue(r),$("input:radio[id=hhmm_opt]").attr("checked",!0),$("input:radio[id=D-optimise]").attr("checked",!0)}function resetAnchor(){resetAnchorForm(),resetPlots()}function calculateAnchor(){let t=$("div.card-input input[type=number]"),e=[];t.each((t,r)=>{e[$(r).attr("id")]=Number($(r).val())});var r={errors:[]};try{r=DragAnchorCalculate(e),derivedInputs={Tp:r.Tp,su_at_zf:r.su_at_zf,q_p_w:r.q_p_w,Ta1:r.Ta1,zaQav:r.zaQav,su_dz:r.su_dz,Ta2:r.Ta2},outputs={za:r.za,zf:r.zf,Tm:r.Tm,h:r.h.toFixed(2)},setvalue(derivedInputs),setvalue(outputs)}catch(t){alert("Error: "+t)}traceCount+=1;var o={x:r.first_Sums,y:r.first_zfs,name:"["+traceCount+"] k<sub>su</sub> = "+e.k+" kPa/m",type:"scatter"},a={x:r.second_ks,y:r.second_zfs,name:"["+traceCount+"] s<sub>um</sub> = "+e.Sum+" kPa",type:"scatter"};layout1.title="<b>k<sub>su</sub> = "+e.k+" kPa/m</b>",layout2.title="<b>s<sub>um</sub> = "+e.Sum+" kPa</b>";$();return originalTrace1=originalTrace1.concat(o),originalTrace2=originalTrace2.concat(a),Plotly.react(firstPlotlyId,originalTrace1,layout1),Plotly.react(secondPlotlyId,originalTrace2,layout2),r}var layout1,layout2,originalTrace1,originalTrace2,calculate_Anchor,firstPlotlyId="drag-anchor-plot1",secondPlotlyId="drag-anchor-plot2",DragAnchorCalculate=function(t){"use strict";var e={errors:[]},r=t.Sum,o=r,a=t.k,s=t.Zt,u=t.d,i=t.bd,l=i*u,n=t.Nc1,c=t.Miu,d=t.mass,h=9.81*d,p=t.Ap,m=t.Nc2,f=t.f,b=t.qm;b*=Math.PI/180;var I=t.qw;I=I/180*Math.PI;var y=t.offset;if(inputCheck(e,"S_um",o,">=0"),inputCheck(e,"k_su",a,">=0"),inputCheck(e,"z'",s,">=0"),inputCheck(e,"d",u,">0"),inputCheck(e,"b/d",i,">0"),inputCheck(e,"N_c,chain",n,">0"),inputCheck(e,"μ",c,">0"),inputCheck(e,"M",d,">0"),inputCheck(e,"A_p",p,">0"),inputCheck(e,"N_c,anchor",m,">0"),inputCheck(e,"f",f,">0"),inputCheck(e,"θ_w",I,">0"),inputCheck(e,"θ_m",b,">=0"),inputCheck(e,"offset",y,">=0"),e.errors.length>0)return e;for(var T=1e-4,_=Number.POSITIVE_INFINITY,N=0,z=0,P=0,k=0,v=0,M=0,g=0,F=0,x=0,w=0,C=0,S=0,A=0,V=0,E=0,$=0,q=0,Y=0;T<100;)N=(T-s)*a+o,z=p*m*f*N,P=Math.atan((z*Math.tan(I)+h)/z),k=z/Math.cos(P),v=T-y,M=v>s,M=.5*M*a*Math.pow(v-s,2)+o*v,g=l*n*M,F=2*g/Math.pow(P-b,2),x=F*Math.exp(c*(P-b)),Math.abs(k-F)<=_&&(_=Math.abs(k-F),w=T,C=N,S=z,A=P,V=k,E=M,$=g,q=F,Y=x),T+=1e-4;var O=Y/h;e.h=O,e.Tp=S.toFixed(0),e.su_at_zf=C.toFixed(2),e.q_p_w=A.toFixed(2),e.Ta1=V.toFixed(2),e.zaQav=$.toFixed(2),e.su_dz=E.toFixed(2),e.Ta2=q.toFixed(2),e.za=w-y,e.za=e.za.toFixed(2),e.zf=w.toFixed(2),e.Tm=Y.toFixed(2);var D=1,Q=zerosVector(101),R=zerosVector(101);for(o=0;o<=100;){for(T=.01,_=Number.POSITIVE_INFINITY;T<100;)N=(T-s)*a+o,z=p*m*f*N,P=Math.atan((z*Math.tan(I)+h)/z),k=z/Math.cos(P),v=T-y,M=v>s,M=.5*M*a*Math.pow(v-s,2)+o*v,g=l*n*M,F=2*g/Math.pow(P-b,2),Math.abs(k-F)<=_&&(_=Math.abs(k-F),w=T),T+=.01;Q[D-1]=w,R[D-1]=o,D+=1,o+=1}e.first_zfs=Q,e.first_Sums=R,o=r,D=1,Q=zerosVector(101);var Z=zerosVector(101);for(a=0;a<=100;){for(T=.01,_=Number.POSITIVE_INFINITY;T<100;)N=(T-s)*a+o,z=p*m*f*N,P=Math.atan((z*Math.tan(I)+h)/z),k=z/Math.cos(P),v=T-y,M=v>s,M=.5*M*a*Math.pow(v-s,2)+o*v,g=l*n*M,F=2*g/Math.pow(P-b,2),Math.abs(k-F)<=_&&(_=Math.abs(k-F),w=T),T+=.01;Q[D-1]=w,Z[D-1]=a,D+=1,a+=1}return e.second_zfs=Q,e.second_ks=Z,e},traceCount=0,resetPlots=function(t){var e={modeBarButtonsToAdd:[{name:"fullscreen",icon:Plotly.Icons.fullsreen,direction:"up",click:function(t,e){var r=e.currentTarget;document.fullscreen?document.exitFullscreen():(firstPlotlyId=$(r).closest(".js-plotly-plot")[0].id,$(r).closest(".js-plotly-plot")[0].requestFullscreen())}}],showLink:!0,plotlyServerURL:"https://chart-studio.plotly.com",scrollZoom:!0,editable:!0,displaylogo:!1};layout1={title:"<b>k<sub>su</sub> = 0 kPa/m</b>",xaxis:{title:"s<sub>um</sub> (kPa)"},yaxis:{title:"z<sub>f</sub> (m)",autorange:"reversed"},titlefont:{family:"Roboto, sans-serif",color:"#01579b",size:19},showlegend:!1,hovermode:"compare"},layout2={title:"<b>s<sub>um</sub> = 0 kPa</b>",xaxis:{title:"k (kPa/m)"},yaxis:{title:"z<sub>f</sub> (m)",autorange:"reversed"},titlefont:{family:"Roboto, sans-serif",color:"#01579b",size:19},showlegend:!1,hovermode:"compare"},originalTrace1=[],originalTrace2=[],Plotly.newPlot(firstPlotlyId,originalTrace1,layout1,e),Plotly.newPlot(secondPlotlyId,originalTrace2,layout2,e)},inputCheck=function(t,e,r,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,s=2){">=0"==o&&(isNaN(r)||r<0)?t.errors.push(e+" must be ≥ 0."):">0"==o&&(isNaN(r)||r<=0)?t.errors.push(e+" must be > 0."):o==Number.NEGATIVE_INFINITY&&a==Number.POSITIVE_INFINITY&&isNaN(r)?t.errors.push(e+" must be a number."):(isNaN(r)||r<o||r>a)&&t.errors.push(e+" must be between "+Number(o).toFixed(s)+" and "+Number(a).toFixed(s)+".")};zerosVector=function(t){for(var e=[],r=0;r<t;)e.push(0),r+=1;return e};var alertInputErrors=function(t){if(t.errors.length>0){for(var e="",r=0;r<t.errors.length;r++)e+=t.errors[r]+"\n";return alert(e),!0}return!1};$(window).resize(t=>{firstPlotlyId&&Plotly.Plots.resize(firstPlotlyId),secondPlotlyId&&Plotly.Plots.resize(secondPlotlyId)});