function setvalue(t){for(const e in t)$("input#"+e).val(t[e])}function resetWalking(){var t={A:.02,L:5e3,w:1200,E:207,Alpha:1165e-8,pois:.3,t:.0206,r:.162,mu:.5,Theta:2,F_L:100,F_R:300,T_Inital:20,T_End:100,Internal_pressure:30};setvalue(t),myChart.clear()}function linspace(t,e,a){if("number"!=typeof t)return void alert("linspace第1个参数必须为数字");if("number"!=typeof e)return void alert("linspace第2个参数必须为数字");if(a){if(!Number.isInteger(a)||a<1)return void alert("linspace第3个参数必须为正整数")}else a=100;let n=(e-t)/(a-1),s=new Array(a);for(let e=0;e<s.length;e++)s[e]=t+n*e;return s}function zeros(t,e){if("number"!=typeof t||t<1)return void alert("zeros第1个参数必须为正整数");if("number"!=typeof e||e<1)return void alert("zeros第2个参数必须为正整数");let a=new Array(t).fill(0).map(()=>new Array(e).fill(0));return a}function range(t,e){if(!Number.isInteger(t)||!Number.isInteger(e)||t<0||e<0)alert("range参数必须为正整数");else{if(!(t>=e)){var a=Array(e-t+1).fill(0).map((e,a)=>t+a);return a}alert("range第1参数必须小于第2参数")}}function cool_LessThan_XC(t,e,a,n,s,r,i,o,h,c,l,p){let u=(t*Math.cos(e)-Math.sin(e))*a/2/n/s*(l/r)**2,_=(i*o+h/n/s)*l/r,m=(t*Math.cos(e)-Math.sin(e))/8*a/n/s*(1+c)+.5*(i*o+h/n/s);m*=-(1+c);let y=(u+_+m)*r+p;return y}function cool_MoreThan_XC(t,e,a,n,s,r,i,o,h,c,l,p){let u=-(t*Math.cos(e)+Math.sin(e))*a/2/n/s*((r-l)/r)**2,_=-(i*o+h/n/s)*(r-l)/r,m=(t*Math.cos(e)+Math.sin(e))/8*a/n/s*(1-c)+.5*(i*o+h/n/s);return m*=1-c,y=(u+_+m)*r+p,y}function heat_LessThan_XH(t,e,a,n,s,r,i,o,h,c,l,p){let u=-(t*Math.cos(e)+Math.sin(e))*a/2/n/s*(l/r)**2,_=(i*o+h/n/s)*l/r,m=(t*Math.cos(e)+Math.sin(e))/8*a/n/s*(1-c)-.5*(i*o+h/n/s);return m*=1-c,y=(u+_+m)*r+p,y}function heat_MoreThan_XH(t,e,a,n,s,r,i,o,h,c,l,p){let u=((t*Math.cos(e)-Math.sin(e))*a/2/n/s*((r-l)/r)**2-(i*o+h/n/s)*(r-l)/r-(1+c)*((t*Math.cos(e)-Math.sin(e))/8*a/n/s*(1+c)-.5*(i*o+h/n/s)))*r+p;return u}function linspace2(t,e,a,n){var s=linspace(t,e,n),r=linspace(e,a,n),i=s.concat(r);return i}function N_LessThan_XH(t,e,a,n,s,r,i){return-(t*Math.cos(e)+Math.sin(e))*a*n+r}function N_MoreThan_XH(t,e,a,n,s,r,i){return(t*Math.cos(e)-Math.sin(e))*a*(n-s)+i}function N_LessThan_XC(t,e,a,n,s,r,i){return(t*Math.cos(e)-Math.sin(e))*a*n+r}function N_MoreThan_XC(t,e,a,n,s,r,i){return(t*Math.cos(e)+Math.sin(e))*a*(s-n)+i}function strain_LessThan_XH(t,e,a,n,s,r,i,o,h,c,l){return t*e+a/s/r-(i*Math.cos(o)+Math.sin(o))*h*l/s/r/c}function strain_MoreThan_XH(t,e,a,n,s,r,i,o,h,c,l){return t*e+n/s/r-(i*Math.cos(o)-Math.sin(o))*h*(c-l)/s/r/c}function strain_LessThan_XC(t,e,a,n,s,r,i,o,h,c,l){return t*e+a/s/r+(i*Math.cos(o)-Math.sin(o))*h*l/s/r/c}function strain_MoreThan_XC(t,e,a,n,s,r,i,o,h,c,l){return t*e+n/s/r+(i*Math.cos(o)+Math.sin(o))*h*(c-l)/s/r/c}function keypoints_series(t,e,a){var n=linspace(0,t,2*t+1),s=n.map((t,a)=>[t,e.M[a]]),r=n.map((t,a)=>[t,e.Heat[a]]),i=n.map((t,a)=>[t,e.Cool[a]]),o=n.map((t,a)=>[t,e.Left[a]]),h=n.map((t,a)=>[t,e.Right[a]]),c=[{name:"左端"+a,type:"line",showSymbol:!0,emphasis:{focus:"series"},data:o},{name:"H点"+a,type:"line",showSymbol:!0,emphasis:{focus:"series"},data:r},{name:"中点"+a,type:"line",showSymbol:!0,emphasis:{focus:"series"},data:s},{name:"C点"+a,type:"line",showSymbol:!0,emphasis:{focus:"series"},data:i},{name:"右端"+a,type:"line",showSymbol:!0,emphasis:{focus:"series"},data:h}];return c}function Echart_Option(t,e,a,n,s){if(s.length&&s.length>1){var r=s.length/2,i=(Array(2*r).fill("").map((t,e)=>e<r?"red":"blue"),[]);s.forEach(t=>{i.push(t.name)})}var o={title:{text:e},backgroundColor:"#fff",tooltip:{trigger:"axis",textStyle:{fontSize:10},valueFormatter:t=>t.toFixed(5),backgroundColor:"rgba(250,250,250,0.3)"},grid:{left:20,right:50,bottom:20,containLabel:!0},toolbox:{feature:{mark:{show:!0},dataView:{show:!0},restore:{show:!0},dataZoom:{show:!0},saveAsImage:{show:!0},myFull:{show:!0,title:"全屏",icon:"path://M128 32H32C14.31 32 0 46.31 0 64v96c0 17.69 14.31 32 32 32s32-14.31 32-32V96h64c17.69 0 32-14.31 32-32S145.7 32 128 32zM416 32h-96c-17.69 0-32 14.31-32 32s14.31 32 32 32h64v64c0 17.69 14.31 32 32 32s32-14.31 32-32V64C448 46.31 433.7 32 416 32zM128 416H64v-64c0-17.69-14.31-32-32-32s-32 14.31-32 32v96c0 17.69 14.31 32 32 32h96c17.69 0 32-14.31 32-32S145.7 416 128 416zM416 320c-17.69 0-32 14.31-32 32v64h-64c-17.69 0-32 14.31-32 32s14.31 32 32 32h96c17.69 0 32-14.31 32-32v-96C448 334.3 433.7 320 416 320z",onclick:(t,e)=>{t.target;var a=this.event.target.closest(".echart").id;const n=document.getElementById(a);n.requestFullScreen?n.requestFullScreen():n.msRequestFullscreen?n.msRequestFullScreen():n.webkitRequestFullScreen?n.webkitRequestFullScreen():n.mozRequestFullScreen&&n.mozRequestFullScreen(),n.requestFullScreen?document.exitFullscreen():n.msRequestFullScreen?document.msExitFullscreen():n.webkitRequestFullScreen?document.webkitCancelFullScreen():n.mozRequestFullScreen&&document.mozCancelFullScreen()}}}},xAxis:{type:"value",name:a,splitLine:{show:!0},boundaryGap:!1},yAxis:{type:"value",lineStyle:{width:1},name:n},series:s};return o}function calculateWalking(){let t=$("div.card-input input[type=number]"),e=[];t.each((t,a)=>{e[$(a).attr("id")]=Number($(a).val())});var a=e.A,n=e.L,s=e.w,r=1e9*e.E,i=e.Alpha,o=e.pois,h=e.t,c=e.r,l=e.mu,p=e.Theta*Math.PI/180,u=1e3*e.F_L,_=1e3*e.F_R,m=e.T_Inital,y=e.T_End,M=1e6*e.Internal_pressure,f=s*n,L=2*c,C=M*(.5-o)/i/2/r/h*L,T=C+(y-m),d=(Math.sin(p),Math.cos(p),Math.sin(p),Math.cos(p),Math.sin(p),f*Math.sin(p)+_-u),g=d/l/f/Math.cos(p),X=.5*(1-g)*n,b=.5*(1+g)*n,w=5,H=0,E=0,S=0,k=0,v=0,O=0,N=[],F=[],R=[],A=[],x=[],z=[],q=[],I=[],V=20,B={M:[0],Heat:[0],Cool:[0],Left:[u/1e3],Right:[_/1e3]},W={M:[0],Heat:[0],Cool:[0],Left:[0],Right:[0]},G={M:[0],Heat:[0],Cool:[0],Left:[0],Right:[0]};for(let t=0;t<w;t++){T=C+(y-m);var P=linspace(0,X,V),Z=linspace(X,n,V),j=P.concat(Z),D=new Array(P.length).fill(-l*s*Math.cos(p)),J=new Array(Z.length).fill(l*s*Math.cos(p)),K=D.concat(J),Q=j.map((t,e)=>[t,K[e]]);N.push({name:(t+1).toString()+"次升温土阻力",type:"line",showSymbol:!1,data:Q}),D=P.map(t=>N_LessThan_XH(l,p,s,t,n,u,_)),J=Z.map(t=>N_MoreThan_XH(l,p,s,t,n,u,_));var U=D.concat(J).map(t=>t/1e3),Y=j.map((t,e)=>[t,U[e]]);F.push({name:(t+1).toString()+"次升温轴力",type:"line",showSymbol:!1,data:Y}),B.M.push(N_MoreThan_XH(l,p,s,n/2,n,u,_)/1e3),B.Heat.push(N_LessThan_XH(l,p,s,X,n,u,_)/1e3),B.Cool.push(N_MoreThan_XH(l,p,s,b,n,u,_)/1e3),B.Left.push(N_LessThan_XH(l,p,s,0,n,u,_)/1e3),B.Right.push(N_MoreThan_XH(l,p,s,n,n,u,_)/1e3),D=P.map(t=>strain_LessThan_XH(i,T,u,_,r,a,l,p,f,n,t)),J=Z.map(t=>strain_MoreThan_XH(i,T,u,_,r,a,l,p,f,n,t));var tt=D.concat(J),et=j.map((t,e)=>[t,tt[e]]);R.push({name:(t+1).toString()+"次升温应变",type:"line",showSymbol:!1,data:et}),W.M.push(strain_MoreThan_XH(i,T,u,_,r,a,l,p,f,n,n/2)),W.Heat.push(strain_LessThan_XH(i,T,u,_,r,a,l,p,f,n,X)),W.Cool.push(strain_MoreThan_XH(i,T,u,_,r,a,l,p,f,n,b)),W.Left.push(strain_LessThan_XH(i,T,u,_,r,a,l,p,f,n,0)),W.Right.push(strain_MoreThan_XH(i,T,u,_,r,a,l,p,f,n,n)),D=P.map(t=>heat_LessThan_XH(l,p,f,r,a,n,i,T,u,g,t,H)),J=Z.map(t=>heat_MoreThan_XH(l,p,f,r,a,n,i,T,_,g,t,H));var at=D.concat(J),nt=j.map((t,e)=>[t,at[e]]);A.push({name:(t+1).toString()+"次升温位移",type:"line",showSymbol:!1,data:nt}),E=heat_MoreThan_XH(l,p,f,r,a,n,i,T,_,g,n/2,H),H=heat_LessThan_XH(l,p,f,r,a,n,i,T,u,g,X,H),k=heat_MoreThan_XH(l,p,f,r,a,n,i,T,_,g,b,H),v=heat_LessThan_XH(l,p,f,r,a,n,i,T,u,g,0,H),O=heat_MoreThan_XH(l,p,f,r,a,n,i,T,_,g,n,H),G.M.push(E),G.Heat.push(H),G.Cool.push(k),G.Left.push(v),G.Right.push(O),T=0,P=linspace(0,b,V),Z=linspace(b,n,V),j=P.concat(Z),D=new Array(P.length).fill(l*s*Math.cos(p)),J=new Array(Z.length).fill(-l*s*Math.cos(p)),K=D.concat(J),Q=j.map((t,e)=>[t,K[e]]),x.push({name:(t+1).toString()+"次降温土阻力",type:"line",showSymbol:!1,data:Q}),D=P.map(t=>N_LessThan_XC(l,p,s,t,n,u,_)),J=Z.map(t=>N_MoreThan_XC(l,p,s,t,n,u,_));U=D.concat(J).map(t=>t/1e3),Y=j.map((t,e)=>[t,U[e]]);z.push({name:(t+1).toString()+"次降温轴力",type:"line",showSymbol:!1,data:Y}),B.M.push(N_LessThan_XC(l,p,s,n/2,n,u,_)/1e3),B.Heat.push(N_LessThan_XC(l,p,s,X,n,u,_)/1e3),B.Cool.push(N_LessThan_XC(l,p,s,b,n,u,_)/1e3),B.Left.push(N_LessThan_XC(l,p,s,0,n,u,_)/1e3),B.Right.push(N_MoreThan_XC(l,p,s,n,n,u,_)/1e3),D=P.map(t=>strain_LessThan_XC(i,T,u,_,r,a,l,p,f,n,t)),J=Z.map(t=>strain_MoreThan_XC(i,T,u,_,r,a,l,p,f,n,t));tt=D.concat(J),et=j.map((t,e)=>[t,tt[e]]);q.push({name:(t+1).toString()+"次降温应变",type:"line",showSymbol:!1,data:et}),W.M.push(strain_LessThan_XC(i,T,u,_,r,a,l,p,f,n,n/2)),W.Heat.push(strain_LessThan_XC(i,T,u,_,r,a,l,p,f,n,X)),W.Cool.push(strain_LessThan_XC(i,T,u,_,r,a,l,p,f,n,b)),W.Left.push(strain_LessThan_XC(i,T,u,_,r,a,l,p,f,n,0)),W.Right.push(strain_MoreThan_XC(i,T,u,_,r,a,l,p,f,n,n)),D=P.map(t=>cool_LessThan_XC(l,p,f,r,a,n,i,T,u,g,t,k)),J=Z.map(t=>cool_MoreThan_XC(l,p,f,r,a,n,i,T,_,g,t,k));at=D.concat(J),nt=j.map((t,e)=>[t,at[e]]);I.push({name:(t+1).toString()+"次降温位移",type:"line",showSymbol:!1,data:nt}),S=cool_LessThan_XC(l,p,f,r,a,n,i,T,u,g,n/2,k),H=cool_LessThan_XC(l,p,f,r,a,n,i,T,u,g,X,k),k=cool_LessThan_XC(l,p,f,r,a,n,i,T,_,g,b,k),v=cool_LessThan_XC(l,p,f,r,a,n,i,T,u,g,0,k),O=cool_MoreThan_XC(l,p,f,r,a,n,i,T,_,g,n,k),G.M.push(S),G.Heat.push(H),G.Cool.push(k),G.Left.push(v),G.Right.push(O)}EchartOptionList.resistancesoil=Echart_Option("echart_disp","管道土阻力","x(m)","土阻力(N/m)",N.concat(x)),EchartOptionList.N=Echart_Option("echart_disp","管道轴力","x(m)","轴力(kN)",F.concat(z)),EchartOptionList.strain=Echart_Option("echart_disp","管道应变","x(m)","应变",R.concat(q)),EchartOptionList.disp=Echart_Option("echart_disp","管道位移","x(m)","位移(m)",A.concat(I));var st=keypoints_series(w,G,"位移");EchartOptionList.keypointdisp=Echart_Option("echart_walking","关键点位移","循环数","位移(m)",st);var rt=keypoints_series(w,B,"轴力");EchartOptionList.keypointN=Echart_Option("echart_walking","关键点轴力","循环数","轴力(kN)",rt);var it=keypoints_series(w,W,"应变");EchartOptionList.keypointstrain=Echart_Option("echart_walking","关键点应变","循环数","应变",it),$("select#echart").change(),console.log(0xa1b01d4b1c7)}var ECharts=[],EchartOptionList=[],myChart=echarts.init(document.getElementById("echart_walking"));$("select#echart").on("change",function(t){switch(t.target.value){case"resistancesoil":EchartOptionList.resistancesoil&&(myChart.clear(),myChart.setOption(EchartOptionList.resistancesoil));break;case"N":EchartOptionList.N&&(myChart.clear(),myChart.setOption(EchartOptionList.N));break;case"strain":EchartOptionList.strain&&(myChart.clear(),myChart.setOption(EchartOptionList.strain));break;case"disp":EchartOptionList.disp&&(myChart.clear(),myChart.setOption(EchartOptionList.disp));break;case"keypointdisp":EchartOptionList.keypointdisp&&(myChart.clear(),myChart.setOption(EchartOptionList.keypointdisp));break;case"keypointN":EchartOptionList.keypointN&&(myChart.clear(),myChart.setOption(EchartOptionList.keypointN));break;case"keypointstrain":EchartOptionList.keypointstrain&&(myChart.clear(),myChart.setOption(EchartOptionList.keypointstrain))}}),$(window).resize(t=>{myChart.resize()});